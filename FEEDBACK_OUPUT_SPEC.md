# Feedback-Output-Spec

## 1. Purpose

This specification attempts to create a standard for creating or handling output report generated by Nominatim-Feedback-Reporter when a feedback is submitted.

## 2. File format

The output file generated is stored as an array in form of a YAML file and must follow it's [standards](https://yaml.org/). The YAML
files described here are not exclusive.


### Different Properties


```yaml
# REQUIRED. One of "WR"(wrong result), "WI" (wrong information), "WO" (wrong order), "SF" (simple feedback).
- feedback_type: WI

# OPTIONAL execpt with wrong result or wrong order. One of "simple_search", "structured_search", "reverse_search".
  query_type: simple_search

# OPTIONAL execpt with wrong result or wrong order. Used with simple search query.
  query: Gond Guda Sangvi

# OPTIONAL execpt with wrong result or wrong order. Used with simple search query.
# It is the extra parameters passed when we use advanced options.
# It can contain optional fields which can be one of "viewbox", "dedupe", "bounded", "accept-language", "countrycodes", "polygon_threshold".
  extra_params:
    bounded: '1'
    viewbox: -179.99900,79.23719,179.99900,-68.
  # deduplicate results
    dedupe: 1

# OPTIONAL execpt with wrong result or wrong order. Used with structured search query.
# It can contain optional fields which can be one of "street", "city", "county", "state", "country", "postalcode" and also fields from extra_params that simple_query uses shown just above.
  structured_query:
    city: Lucknow

# OPTIONAL. Only used when wrong information.
# There can be other fields from one of these "name", "housenumber", "street", "locality", "city", "district", "county", "state", "country", "postcode", "lat", "lon".
  city:
    current: Bela mandal
    expected: Bela mandal now

# OPTIONAL. Only used when wrong information.
# There can be other fields from one of these "name", "housenumber", "street", "locality", "city", "district", "county", "state", "country", "postcode", "lat", "lon".
  country:
    current: India
    expected: Indiasadas

# OPTIONAL. Only used when wrong information.
# There can be other fields from one of these "name", "housenumber", "street", "locality", "city", "district", "county", "state", "country", "postcode", "lat", "lon".
  county:
    current: Adilabad
    expected: Adilabadsad

# OPTIONAL. Only used when wrong information.
# There can be other fields from one of these "name", "housenumber", "street", "locality", "city", "district", "county", "state", "country", "postcode", "lat", "lon".
  lat:
    current: 19.597222
    expected: 27.00889787749332

# OPTIONAL. Only used when wrong information.
# There can be other fields from one of these "name", "housenumber", "street", "locality", "city", "district", "county", "state", "country", "postcode", "lat", "lon".
  lon:
    current: 78.7629819
    expected: 77.34375000000001

# OPTIONAL. Only used when wrong information.
# There can be other fields from one of these "name", "housenumber", "street", "locality", "city", "district", "county", "state", "country", "postcode", "lat", "lon".
  name:
    current: Gond Guda Sangvi
    expected: Gond Guda Sangvisadas

# OPTIONAL. Only used when wrong information.
# There can be other fields from one of these "name", "housenumber", "street", "locality", "city", "district", "county", "state", "country", "postcode", "lat", "lon".
  state:
    current: Telangana
    expected: Telanganaasd

# REQUIRED except with simple feedback. It is the selected OSM object for different feedback_type.
  correct_osm_object: N5362931045

# OPTIONAL execpt with simple feedback.
  final_bug_description: Random text

# REQUIRED. Contains timestamp of nominatim database.
  nominatim_database_timestamp: '2021-07-21T10:04:14+00:00'

# REQUIRED. Contains version of nominatim database.
  nominatim_database_version: 3.7.0-2

# REQUIRED. Contains version of nominatim software.
  nominatim_software_version: 3.7.0-2

# REQUIRED. Contains timestamp when feedback is recorded.
  timestamp: '2021-07-21T10:05:08.488Z
```


### Examples

```yaml
# Wrong Result
- correct_osm_object: N245753718
  feedback_type: WR
  nominatim_database_timestamp: '2021-07-20T04:40:11+00:00'
  nominatim_database_version: 3.7.0-2
  nominatim_software_version: 3.7.0-2
  query: lucknow
  query_type: simple_search
  timestamp: '2021-07-20T04:40:40.111Z'

# Wrong Information
- correct_osm_object: N7721349065
  feedback_type: WI
  name:
    current: DÃ©li
    expected: D
  nominatim_database_timestamp: '2021-07-21T10:04:14+00:00'
  nominatim_database_version: 3.7.0-2
  nominatim_software_version: 3.7.0-2
  query: dehli
  query_type: simple_search
  timestamp: '2021-07-21T10:05:08.488Z'

# Wrong Order
- correct_osm_object: R10330977
  extra_params:
    exclude_place_ids: 409784,260941,344288
  feedback_type: WO
  final_bug_description: thanks
  nominatim_database_timestamp: '2021-05-20T18:13:38+00:00'
  nominatim_database_version: 3.7.0-2
  nominatim_software_version: 3.7.0-2
  query: nagpur
  query_type: simple_search
  timestamp: '2021-07-19T12:06:25.727Z'

# Simple Feedback
- feedback_type: SF
  final_bug_description: Random feedback
  nominatim_database_timestamp: '2021-05-20T18:13:38+00:00'
  nominatim_database_version: 3.7.0-2
  nominatim_software_version: 3.7.0-2
  timestamp: '2021-07-15T20:33:00.469Z'
```